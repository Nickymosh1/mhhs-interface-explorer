<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MHHS Interface Explorer | E.ON Next Theme</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        :root {
            --eon-red: #FF4822;
            --birch: #FAF6F4;
            --white: #FFFFFF;
            --dark-purple: #36164A;
            --purple: #5E0D98;
            
            --shadow-red: #e50000;
            --shadow-birch: #f2e6e1;
            --shadow-purple: #170920;

            /* Data Colors */
            --data-sun: #FFDE00;
            --data-gas-off: #9254FF;
            --data-leaf: #1AE570;
            
            /* Shadow colors for data buttons */
            --shadow-gas-off: #7a46d4;
            --shadow-sun: #d9bd00;
            --shadow-leaf: #16c25e;
        }
        /* Theming the scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: var(--birch);
        }
        ::-webkit-scrollbar-thumb {
            background: #d1c8c5;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #b8b0ad;
        }
        /* Active filter logic */
        .filter-btn {
            transition: all 0.2s ease-in-out;
        }
        .filter-btn.active-filter {
            transform: translateY(-1px);
        }
        .filter-btn[data-filter="all"].active-filter {
            background-color: var(--eon-red) !important;
            color: var(--white) !important;
            box-shadow: 2px 2px 8px 0px var(--shadow-red);
        }
        .filter-btn[data-filter="supplier_send"].active-filter {
            background-color: var(--data-gas-off) !important;
            color: var(--birch) !important;
            box-shadow: 2px 2px 8px 0px var(--shadow-gas-off);
        }
        .filter-btn[data-filter="supplier_receive"].active-filter {
            background-color: var(--data-sun) !important;
            color: var(--dark-purple) !important;
            box-shadow: 2px 2px 8px 0px var(--shadow-sun);
        }
        .filter-btn[data-filter="supplier_both"].active-filter {
            background-color: var(--data-leaf) !important;
            color: var(--dark-purple) !important;
            box-shadow: 2px 2px 8px 0px var(--shadow-leaf);
        }
        .filter-btn[data-filter="none"].active-filter {
            background-color: var(--dark-purple) !important;
            color: var(--white) !important;
            box-shadow: 2px 2px 8px 0px var(--shadow-purple);
        }
    </style>
</head>
<body class="bg-[var(--birch)] text-[var(--dark-purple)]">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-[var(--eon-red)]">MHHS Interface Explorer</h1>
            <p class="text-[var(--purple)] opacity-80 mt-2">Search and filter interfaces based on the Supplier's role.</p>
        </header>

        <div class="flex flex-col lg:flex-row gap-8">

            <aside class="lg:w-1/3 xl:w-1/4 bg-[var(--white)] p-6 rounded-2xl h-full shadow-[5px_5px_20px_0px_var(--shadow-birch)]">
                <h2 id="filter-heading" class="text-xl font-bold mb-4">Find an Interface</h2>
                
                <div class="mb-4">
                    <input type="search" id="searchInput" placeholder="Search by ID, name, or description..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--eon-red)] focus:border-[var(--eon-red)] transition bg-[var(--birch)] placeholder:text-[var(--purple)] placeholder:opacity-60">
                </div>

                <div role="group" aria-labelledby="filter-heading" class="flex flex-wrap gap-2 mb-4">
                    <button class="filter-btn border border-transparent text-[var(--purple)] bg-opacity-80 bg-[var(--birch)] px-3 py-1 rounded-full text-sm font-medium" data-filter="all" aria-pressed="true">All</button>
                    <button class="filter-btn border border-transparent text-[var(--purple)] bg-opacity-80 px-3 py-1 rounded-full text-sm font-medium" data-filter="supplier_send" aria-pressed="false" style="background-color: #9254FF20;">Supplier Send</button>
                    <button class="filter-btn border border-transparent text-[var(--dark-purple)] bg-opacity-80 px-3 py-1 rounded-full text-sm font-medium" data-filter="supplier_receive" aria-pressed="false" style="background-color: #FFDE0040;">Supplier Receive</button>
                    <button class="filter-btn border border-transparent text-[var(--dark-purple)] bg-opacity-80 px-3 py-1 rounded-full text-sm font-medium" data-filter="supplier_both" aria-pressed="false" style="background-color: #1AE57040;">Supplier Both</button>
                    <button class="filter-btn border border-transparent text-[var(--purple)] bg-opacity-80 bg-slate-200 px-3 py-1 rounded-full text-sm font-medium" data-filter="none" aria-pressed="false">Not Involved</button>
                </div>

                <div id="interfaceList" class="overflow-y-auto h-[60vh] pr-2" role="region" aria-live="polite" aria-atomic="true">
                    <!-- JS populates this area -->
                </div>
            </aside>

            <main id="detailsPanel" class="lg:w-2/3 xl:w-3/4 bg-[var(--white)] p-6 md:p-8 rounded-2xl shadow-[5px_5px_20px_0px_var(--shadow-birch)]" role="main" aria-live="polite">
                <div id="welcomeMessage" class="flex flex-col items-center justify-center h-full text-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-24 h-24 text-gray-300 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1" aria-hidden="true">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 18h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2zM9 9h6v6H9V9z" />
                    </svg>
                    <h2 class="text-2xl font-bold">Select an Interface</h2>
                    <p class="text-[var(--purple)] opacity-80 mt-1">Click on an item from the list to view its details here.</p>
                </div>
                <div id="detailsContent" class="hidden">
                    <!-- JS populates this area -->
                </div>
            </main>
        </div>
    </div>

    <script>
        // --- INTERFACE DATA (embedded in HTML) ---
        const interfaceData = [
            {"id":"IF-001/PUB-001","name":"Notification of Change of Supplier","description":"Notification of Change of Supplier","sender":"Registration Service","receiver":"Incoming Supplier (SUP), Marketwide Data Service (MDS), LDSO","context":"Following a successful Change of Supplier, the CSS will notify this to the Registration Service. The Registration Service will then notify parties that a successful Change of Supplier has taken place. This provides the Gaining Supplier with key information about the MPAN as it currently exists in the Registration Service.","supplier_type":"supplier_receive"},
            {"id":"IF-002/PUB-002","name":"Notification to New Supplier of Site Information","description":"Notification to New Supplier of Site Information","sender":"Registration Service","receiver":"Incoming Supplier (SUP)","context":"Following notification of a potential/pending Switch from CSS, the Registration Service will issue this message to the incoming Supplier to advise the incoming Supplier of Site Information so that the Supplier can determine the correct Service Providers to appoint (this is the equivilent to the D0217/D0260)","supplier_type":"supplier_receive"},
            {"id":"IF-003/PUB-003","name":"Notification of Reverse Migration and Deappointment","description":"Notification of Reverse Migration and Deappointment","sender":"Registration Service","receiver":"Data Service (ADS, SDS, UMSDS) / Metering Service (MSA, MSS, UMSO) / LDSO / MDS / Supplier","context":"This provides Notification of a Reverse Migration to MDS/LDSO. It also advises MHHS Service Providers that they have been De-Appointed (as a result of a Reverse Migration) and where appropriate details of the incoming 'old regime' agents i.e. MOP / DC.","supplier_type":"supplier_receive"},
            {"id":"IF-004","name":"Comms Hub Information (Optional)","description":"Optional interface to allow passing of Comms Hub information","sender":"Metering Service Smart (MSS) / Supplier (SUP)","receiver":"Supplier (SUP) / Metering Service Smart (MSS)","context":"Use of this interface is optional. It is provided for use by Smart Metering Services & Suppliers that bilaterally agree to share Comms Hub information between themselves.","supplier_type":"supplier_both"},
            {"id":"IF-005/PUB-005","name":"Metering Service MTD Updates to Registration","description":"To notify the Registration Service of Metering related Data Item changes, for example, New install, Removal, MEX, change to existing Meter Details","sender":"Metering Service Smart (MSS) & Metering Service Advanced (MSA)","receiver":"Registration Service (REGS)","context":"This interface is used by Metering Services to notify any changes required to Metering Technical Information, to the Registration Service For example, Meter Installations, Removals and Exchanges. The interface also allows for corrections to the currently installed meter & the historical record of installed metering assets.","supplier_type":"none"},
            {"id":"IF-006/PUB-006","name":"Notification of Metering Service MTD Update to Registration","description":"Outcome of Metering Service Request to Update Registration after Install, Removal, MEX or Updates to Existing Meter","sender":"Registration Service (REGS)","receiver":"Metering Service (MSS, MSA), Data Service (SDS, ADS) , Supplier (SUP), LDSO, EES & MDR","context":"This interface is used by Registration Service to notify the outcome of changes of Metering Technical Information to the Metering Service, and if successfull other participants. For example, Meter Installations, Removals and Exchanges. This response also includes confirmation of other existing meter(s) installed at the MPAN, which were not impacted by the Metering Event.","supplier_type":"supplier_receive"},
            {"id":"IF-007","name":"Change of Energisation Status","description":"This interface is used by the Metering Service to notify the Registration Service of changes to the energisation status or to inform the Supplier where a request to change the energisation status has been rejected.","sender":"Metering Service Smart (MSS) & Metering Service Advanced (MSA), Unmetered Supplies Operator (UMSO)","receiver":"Registration Service (REGS), Supplier (SUP) (Failed to action only)","context":"This interface is used by the Metering Service to notify the Registration Service of changes to the energisation status or to inform the Supplier where a request to change the energisation status has been rejected.","supplier_type":"supplier_receive"},
            {"id":"IF-008/PUB-008","name":"Notification of Change of Energisation Status Request","description":"This interface is used by Registration Service to notify the outcome of Change of Energisation Status Requests.","sender":"Registration Service (REGS)","receiver":"Metering Service (MSS, MSA, UMSO), Data Service (SDS, ADS, UMSDS), Supplier (SUP), LDSO, Market-wide Data Service (MDS), EES & MDR","context":"This interface is used by Registration Service to notify the outcome of Change of Energisation Status Requests.","supplier_type":"supplier_receive"},
            {"id":"IF-009/PUB-009","name":"Notification of MPAN Disconnection/Termination","description":"This interface is used by Registration Service to notify participants that an MPAN has been Disconnected by LDSO and/or terminated by CSS. It is no longer possible to register an MPAN following this point.","sender":"Registration Service (REGS)","receiver":"Supplier (SUP), LDSO, Market-wide Data Service (MDS), EES","context":"This interface is used by Registration Service to notify participants that an MPAN has been Disconnected by LDSO and/or terminated by CSS. It is no longer possible to register an MPAN following this point.","supplier_type":"supplier_receive"},
            {"id":"IF-013/PUB-013","name":"Notification of Defaulted Consumption","description":"This interface will be issued by ECS/MDS to advise Supplier, Data Service and if required the LDSO of the volume(s) for each Settlement Period which have been Defaulted","sender":"Market-wide Data Service (MDS)","receiver":"Data Services - Smart Data Service (SDS) / Advanced Data Service (ADS) / UMSDS / Supplier (SUP) / LDSO","context":"This interface will be issued by ECS/MDS to advise Supplier, Data Service and if required the LDSO of the volume(s) for each Settlement Period which have been Defaulted","supplier_type":"supplier_receive"},
            {"id":"IF-014/PUB-014","name":"Rejection of Consumption Data/Warning","description":"Rejection of Data Service provided Actual or Estimated UTC Settlement Period Consumption data/ Warning of Consumption on a De-energised MPAN","sender":"Marketwide Data Service (MDS)","receiver":"Data Services (SDS, ADS, UMSDS), Supplier (SUP)","context":"Rejection of Data Service provided Actual or Estimated UTC Settlement Period Consumption data/ Warning of Consumption on a De-energised MPAN","supplier_type":"supplier_receive"},
            {"id":"IF-015","name":"Request for Consumption Replay","description":"This interface is used by Advanced Data Services to request a Replay of historic Consumption submissions for a newly acquired MPAN, from the DIP.","sender":"Advanced Data Service (ADS)","receiver":"DIP Replay Service","context":"This interface is used by Advanced Data Services to request a Replay of historic Consumption submissions for a newly acquired MPAN, from the DIP.","supplier_type":"none"},
            {"id":"IF-016","name":"Consumption Replay","description":"This interface is used by the DIP in order to Replay historic Consumption submissions for a newly acquired MPAN, back to the Advanced Data Service.","sender":"DIP","receiver":"Advanced Data Service (ADS)","context":"This interface is used by the DIP in order to Replay historic Consumption submissions for a newly acquired MPAN, back to the Advanced Data Service.","supplier_type":"none"},
            {"id":"IF-018/PUB-018","name":"Notification of LDSO Maintained Data Changes","description":"This interface is to notify participants of changes to Registration Service Data Items, principally those maintained by the LDSO or notified to Registration Service directly by CSS","sender":"Registration Service (REGS)","receiver":"Supplier (SUP), Data Service (ADS, SDS, UMSDS), Metering Service (MSA, MSS, UMSO) , Market-wide Data Service (MDS), EES & LDSO","context":"This interface is to notify participants of changes to Registration Service Data Items, principally those maintained by the LDSO or notified to Registration Service directly by CSS","supplier_type":"supplier_receive"},
            {"id":"IF-019","name":"Request to Create/Change MPAN Relationship","description":"Interface to allow Supplier to request/specify the Creation, Addition or Removal of MPAN(s) from a MPAN Relationship - either an Import/Export or Related MPAN grouping.","sender":"Supplier (SUP)","receiver":"Registration Service (REGS)/LDSO","context":"Interface to allow Supplier to request/specify the Creation, Addition or Removal of MPAN(s) from a MPAN Relationship - either an Import/Export or Related MPAN grouping.","supplier_type":"supplier_send"},
            {"id":"IF-020/PUB-020","name":"MPAN Relationship Response","description":"Interface providing the Registration Service Response to an MPAN Relationship request to create/change.","sender":"Registration Service (REGS)/ LDSO","receiver":"Supplier (SUP), Data Service (ADS, SDS), Metering Service (MSS, MSA), LDSO & EES","context":"Interface providing the Registration Service Response to an MPAN Relationship request to create/change.","supplier_type":"supplier_receive"},
            {"id":"IF-021/PUB-021","name":"Provide Settlement Period Consumption","description":"Data Service will provide Actual or Estimated UTC Settlement Period Consumption data (Active and where appropriate Reactive), for each MPAN, for each day that they are appointed.","sender":"Data Services - Smart Data Service (SDS) / Advanced Data Service (ADS) / UMSDS","receiver":"Load Shaping Service (LSS) / Market-wide Data Service (MDS) / Distributor (LDSO) / Supplier (SUP)","context":"Data Service will provide Actual or Estimated UTC Settlement Period Consumption data (Active and where appropriate Reactive), for each MPAN, for each day that they are appointed.","supplier_type":"supplier_receive"},
            {"id":"IF-022/PUB-022","name":"Provide Load Shape Period Data","description":"Central settlement will calculate Settlement Period Load Shapes on a daily basis. These new load shapes are created for each UTC Settlement Period of a UTC Settlement Date and must be delivered to the Data Services, within agreed timescales, so as to allow for Data Service Validation & Estimation processes to operate in an accurate & timely fashion.","sender":"Load Shaping Service (LSS)","receiver":"Supplier (SUP), Data Services (ADS, SDS, UMSDS), Public (via separate file-sharing mechanism)","context":"Central settlement will calculate Settlement Period Load Shapes on a daily basis. These new load shapes are created for each UTC Settlement Period of a UTC Settlement Date and must be delivered to the Data Services, within agreed timescales, so as to allow for Data Service Validation & Estimation processes to operate in an accurate & timely fashion.","supplier_type":"supplier_receive"},
            {"id":"IF-023/PUB-023","name":"Provide Load Shape Totals Data","description":"Central settlement will calculate Settlement Period Load Shapes on a daily basis. These new load shapes are created for each UTC Settlement Period of a UTC Settlement Date and must be delivered to the Data Services, within agreed timescales, so as to allow for Data Service Validation & Estimation processes to operate in an accurate & timely fashion.","sender":"Load Shaping Service (LSS)","receiver":"Supplier (SUP), Data Services (ADS, SDS, UMSDS), Public (via separate file-sharing mechanism)","context":"Central settlement will calculate Settlement Period Load Shapes on a daily basis. These new load shapes are created for each UTC Settlement Period of a UTC Settlement Date and must be delivered to the Data Services, within agreed timescales, so as to allow for Data Service Validation & Estimation processes to operate in an accurate & timely fashion.","supplier_type":"supplier_receive"},
            {"id":"IF-024/PUB-024","name":"Notification of Data Service Influencing Circumstances","description":"Notification to the Data Service of circumstances which may impact or influence Data Service treatment of a site","sender":"Supplier (SUP)","receiver":"Data Service (ADS, SDS), MDR","context":"Notification to the Data Service of circumstances which may impact or influence Data Service treatment of a site","supplier_type":"supplier_send"},
            {"id":"IF-025","name":"Request to Update Supplier Maintained Data","description":"This interface is to allow Supplier to maintain Registration Service Data Items for which it has ownership/responsibility","sender":"Supplier (SUP)","receiver":"Registration Service (REGS)","context":"This interface is to allow Supplier to maintain Registration Service Data Items for which it has ownership/responsibility","supplier_type":"supplier_send"},
            {"id":"IF-026/PUB-026","name":"Notification of Supplier Maintained Data Changes","description":"This interface is to notify participants of changes to Registration Service Data Items, principally those maintained by the Supplier","sender":"Registration Service (REGS)","receiver":"Supplier (SUP)/ Data Service (ADS, SDS, UMSDS)/ Central Settlements (LSS)/ LDSO / Metering Service (MSA, MSS, UMSO)/ EES/ MDR","context":"This interface is to notify participants of changes to Registration Service Data Items, principally those maintained by the Supplier","supplier_type":"supplier_receive"},
            {"id":"IF-027","name":"Request to Calculate & Submit Consumption Amendment","description":"Request by Supplier for the Data Service to Calculate and Submit a Consumption Amendment","sender":"Supplier (SUP)","receiver":"Advanced Data Service (ADS) and Smart Data Service (SDS)","context":"Request by Supplier for the Data Service to Calculate and Submit a Consumption Amendment","supplier_type":"supplier_send"},
            {"id":"IF-028/PUB-028","name":"Response to Consumption Amendment Request","description":"Response from the Data Service to a Supplier Request Calculate and Submit a Consumption Amendment","sender":"Data Service (ADS, SDS, UMSDS)","receiver":"Supplier (SUP)","context":"Response from the Data Service to a Supplier Request Calculate and Submit a Consumption Amendment","supplier_type":"supplier_receive"},
            {"id":"IF-031","name":"Request to Appoint Service Provider","description":"Initial request from Supplier to Registration Service to Appoint a Service Provider, either Metering Service or Data Service","sender":"Supplier (SUP)","receiver":"Registration Service (REGS)","context":"Initial request from Supplier to Registration Service to Appoint a Service Provider, either Metering Service or Data Service","supplier_type":"supplier_send"},
            {"id":"IF-032/PUB-032","name":"Response to Initial Service Provider Appointment Request","description":"Registration Service Response to Suppliers initial request to Appoint a Service Provider, either Metering Service or Data Service","sender":"Registration Service (REGS)","receiver":"Supplier (SUP)","context":"Registration Service Response to Suppliers initial request to Appoint a Service Provider, either Metering Service or Data Service","supplier_type":"supplier_receive"},
            {"id":"IF-033/PUB-033","name":"Request to Consider Service Provider Appointment","description":"Registration Service request to a Service Provider to consider Appointment to an MPAN as either a Metering Service or Data Service","sender":"Registration Service (REGS)","receiver":"Data Service (ADS, SDS, UMSDS)/ Metering Service (MSA, MSS, UMSO)","context":"Registration Service request to a Service Provider to consider Appointment to an MPAN as either a Metering Service or Data Service","supplier_type":"none"},
            {"id":"IF-034","name":"Service Provider Appointment Response","description":"Service Providers Response to request for Appointment or Change of Appointment for an MPAN","sender":"Data Service (ADS, SDS, UMSDS)/ Metering Service (MSA, MSS, UMSO)","receiver":"Registration Service (REGS)","context":"Service Providers Response to request for Appointment or Change of Appointment for an MPAN","supplier_type":"none"},
            {"id":"IF-035/PUB-035","name":"Notification of Service Provider Appointment Status","description":"Registration Service Notification on Appointment Status. This could be that Appointment has been Accepted or Rejected by Service Provider; has become Lapsed (i.e. could not be successfully matched with a SecuredActive Switch). It is also used to advise the Incumbent Metering Service to issue MTDs to incoming Service Providers.","sender":"Registration Service (REGS)","receiver":"Supplier (SUP), Incumbent Metering Service, Data Service (ADS, SDS, UMSDS), Metering Service (MSA, MSS, UMSO)","context":"Registration Service Notification on Appointment Status. This could be that Appointment has been Accepted or Rejected by Service Provider; has become Lapsed (i.e. could not be successfully matched with a SecuredActive Switch). It is also used to advise the Incumbent Metering Service to issue MTDs to incoming Service Providers.","supplier_type":"supplier_receive"},
            {"id":"IF-036/PUB-036","name":"Confirmation of Service Provider Appointment","description":"Registration Service formal Confirmation of Appointment & provision of MPAN Supporting Data and MTDs","sender":"Registration Service (REGS)","receiver":"Supplier (SUP) / Data Service (ADS, SDS, UMSDS)/ Metering Service (MSA, MSS, UMSO) / LDSO / MDS / EES","context":"Registration Service formal Confirmation of Appointment & provision of MPAN Supporting Data and MTDs","supplier_type":"supplier_receive"},
            {"id":"IF-037/PUB-037","name":"Notification of Service Provider De-Appointment","description":"Notification to a Service Provider that they have been De-Appointed, and no longer have responsibility for the MPAN","sender":"Registration Service (REGS)","receiver":"Supplier (SUP) / Data Service (ADS, SDS, UMSDS)/ Metering Service (MSA, MSS, UMSO) / MDS / LDSO / EES","context":"Notification to a Service Provider that they have been De-Appointed, and no longer have responsibility for the MPAN","supplier_type":"supplier_receive"},
            {"id":"IF-038","name":"Customer Direct Contract Request","description":"Request from Service Provider either to record, delete or amend a Customer Direct Contract with that Service Provider, for a given MPAN","sender":"Metering Service (MSA, MSS, UMSO)/Data Service (ADS, SDS, UMSDS)","receiver":"Registration Service (REGS)","context":"Request from Service Provider either to record, delete or amend a Customer Direct Contract with that Service Provider, for a given MPAN","supplier_type":"none"},
            {"id":"IF-039/PUB-039","name":"Customer Direct Contract Advisory Response","description":"Registration Service Response to Service Provider request to either to record, delete or amend a Customer Direct Contract with that Service Provider, for a given MPAN","sender":"Registration Service (REGS)","receiver":"Metering Service (MSA, MSS, UMSO)/Data Service (ADS, SDS, UMSDS) / Supplier (SUP)/ EES","context":"Registration Service Response to Service Provider request to either to record, delete or amend a Customer Direct Contract with that Service Provider, for a given MPAN","supplier_type":"supplier_receive"},
            {"id":"IF-040/PUB-040","name":"Notification of Annual Consumption","description":"On a monthly basis the Market-wide Data Service will calculate an Annual Consumption for each MPAN. This interface is to notify participants of the value, quality and calculation date of that consumption.","sender":"Market-wide Data Service (MDS)","receiver":"Suppliers (SUP), Data Service (SDS, ADS, UMSDS), LDSO, Registration Service (REGS) & EES","context":"On a monthly basis the Market-wide Data Service will calculate an Annual Consumption for each MPAN. This interface is to notify participants of the value, quality and calculation date of that consumption.","supplier_type":"supplier_receive"},
            {"id":"IF-041/PUB-041","name":"Smart / Advanced Readings","description":"New Interface to exchange Exchange, Smart and Smart COR Meter Readings between MHHS Parties","sender":"MS, DS, Supplier","receiver":"Advanced Data Service (ADS) and Smart Data Service (SDS) / Supplier (SUP)/ LDSO","context":"This interface is to allow Cumulative Reads and/or, Smart/Advanced Register Redings, to be exchanged in a number of business scenarios. Following MHHS implementation, in most cases consumption values will be available directly from the meter. However, there may be occasions when consumption may not be available, therefore a Cumulative Reading will need to be captured/shared as a 'fall back' measure","supplier_type":"supplier_both"},
            {"id":"IF-043/PUB-043","name":"Registration Service Notification of Change of Connection Type","description":"Registration Notification of a Successful Change in Connection Type","sender":"Registration Service (REGS)","receiver":"Supplier (SUP), Data Service (ADS,SDS), Metering Service (MSS, MSA), MDS, LDSO & EES","context":"Registration Service Notification of a Change in Connection Type","supplier_type":"supplier_receive"},
            {"id":"IF-044/PUB-044","name":"Registration Service Notification of Change of Segment","description":"Registration Notification of a Successful Change in Market Segment","sender":"Registration Service (REGS)","receiver":"Supplier (SUP), MDS, LDSO & EES","context":"Registration Service Notification of a Change in Market Segment","supplier_type":"supplier_receive"},
            {"id":"IF-045/PUB-045","name":"Registration Service Reminder Notification","description":"Reminder Notification to a Supplier that some element of Registration Data is inconsistent or invalid, & action is required to resolve it","sender":"Registration Service (REGS)","receiver":"Supplier (SUP)/ Advanced Data Service (ADS) and Smart Data Service (SDS) / Advanced Metering Service (MSA) and Smart Metering Service (MSS)","context":"Reminder Notification to a Supplier that some element of Registration Data is inconsistent or invalid, & action is required to resolve it","supplier_type":"supplier_receive"},
            {"id":"IF-047/PUB-047","name":"Notification of the Publication of a Downloadable Asset","description":"URI Listing showing location of Downloadable Resources (For example ISD)","sender":"Central Settlements (ISD)","receiver":"Public (All Roles)","context":"The purpose of this interface is to notify DIP Participants of the Publication of a Downloadable Asset, such as ISD or other Reports, and the URI that can be used to access the publication.","supplier_type":"none"},
            {"id":"IF-050/PUB-050","name":"EES Updates","description":"The purpose of this interface is to provide updates to EES from the Registration Service which are not required to be serviced by any other interface.","sender":"Registration Service (REGS)","receiver":"EES Only","context":"Registration Service sends this to provide updates to EES which are not required to be serviced by any other interface.","supplier_type":"none"},
            {"id":"IF-051/PUB-051","name":"EES Data Refresh","description":"Flow from Registration Service to EES providing a 'refresh'of the current data position in the Registration Service","sender":"Registration Service (REGS)","receiver":"Electricity Enquiry Service (EES) ONLY","context":"Flow from Registration Service to EES providing a 'refresh'of the current data position in the Registration Service","supplier_type":"none"},
            {"id":"IF-061/PUB-061","name":"MDR Start Request","description":"Request from SDS that an MDR begins Data Retrieval Activity","sender":"Smart Data Service (SDS)","receiver":"Meter Data Retriever (MDR)","context":"Request from the SDS that an MDR starts Data Retrieval Activity","supplier_type":"none"},
            {"id":"IF-062/PUB-062","name":"MDR Start Request Response","description":"Reponse from MDR to SDS Request to Start Data Retrieval Activity","sender":"Meter Data Retriever (MDR)","receiver":"Smart Data Service (SDS)","context":"This is the reponse from MDR to SDS Request to Start Data Retrieval Activity","supplier_type":"none"},
            {"id":"IF-063/PUB-063","name":"MDR Stop Request","description":"Request from SDS that an MDR Stop Data Retrieval Activity","sender":"Smart Data Service (SDS)","receiver":"Meter Data Retriever (MDR)","context":"Request from the SDS that an MDR stops Data Retrieval Activity","supplier_type":"none"},
            {"id":"IF-064/PUB-064","name":"MDR Provide Consumption","description":"MDR Provide Consumption to SDS","sender":"Meter Data Retriever (MDR)","receiver":"Smart Data Service (SDS)","context":"MDR Provide Consumption to SDS","supplier_type":"none"},
            {"id":"IF-065/PUB-065","name":"MDR Request / Provide Meter Reading","description":"MDR Provide Meter Reading(s) to SDS","sender":"Meter Data Retriever (MDR) or Smart Data Service (SDS)","receiver":"Smart Data Service (SDS) or Meter Data Retreiver (MDR)","context":"MDR Provide Meter Reading(s) to SDS","supplier_type":"none"}
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const searchInput = document.getElementById('searchInput');
            const interfaceList = document.getElementById('interfaceList');
            const welcomeMessage = document.getElementById('welcomeMessage');
            const detailsContent = document.getElementById('detailsContent');
            const filterButtons = document.querySelectorAll('.filter-btn');

            let currentFilter = 'all';
            let currentSearchTerm = '';
            let filteredInterfaces = [];
            
            const renderInterfaceList = () => {
                const lowerCaseSearchTerm = currentSearchTerm.toLowerCase();
                
                // Filter interfaces based on current filter and search term
                filteredInterfaces = interfaceData.filter(item => {
                    const matchesFilter = (currentFilter === 'all' || item.supplier_type === currentFilter);
                    const matchesSearch = !lowerCaseSearchTerm ||
                                          item.id.toLowerCase().includes(lowerCaseSearchTerm) ||
                                          item.name.toLowerCase().includes(lowerCaseSearchTerm) ||
                                          item.description.toLowerCase().includes(lowerCaseSearchTerm);
                    return matchesFilter && matchesSearch;
                });

                interfaceList.innerHTML = '';

                if (filteredInterfaces.length === 0) {
                    interfaceList.innerHTML = `<div class="text-center text-[var(--purple)] opacity-80 p-4">No matches found.</div>`;
                    return;
                }
                
                const fragment = document.createDocumentFragment();
                filteredInterfaces.forEach(item => {
                    const typeStyles = {
                        supplier_send: 'border-l-4 border-[var(--data-gas-off)]',
                        supplier_receive: 'border-l-4 border-[var(--data-sun)]',
                        supplier_both: 'border-l-4 border-[var(--data-leaf)]',
                        none: 'border-l-4 border-transparent'
                    };
                    const element = document.createElement('div');
                    element.className = `p-4 mb-2 bg-[var(--birch)] rounded-lg cursor-pointer hover:bg-[var(--white)] hover:shadow-[2px_2px_10px_0px_var(--shadow-birch)] transition-all duration-200 ${typeStyles[item.supplier_type]}`;
                    element.dataset.id = item.id;
                    element.setAttribute('role', 'button');
                    element.setAttribute('tabindex', '0');
                    element.innerHTML = `
                        <p class="font-bold text-[var(--dark-purple)] pointer-events-none">${escapeHtml(item.id)}</p>
                        <p class="text-sm text-[var(--purple)] opacity-90 truncate pointer-events-none">${escapeHtml(item.name)}</p>
                    `;
                    fragment.appendChild(element);
                });
                interfaceList.appendChild(fragment);
            };

            const showDetails = (id) => {
                const item = filteredInterfaces.find(i => i.id === id) || interfaceData.find(i => i.id === id);
                if (!item) return;

                welcomeMessage.classList.add('hidden');
                detailsContent.classList.remove('hidden');

                const typeInfo = {
                    supplier_send: { label: 'Supplier Send', classes: 'bg-[var(--data-gas-off)] bg-opacity-20 text-[var(--birch)]' },
                    supplier_receive: { label: 'Supplier Receive', classes: 'bg-[var(--data-sun)] bg-opacity-30 text-[var(--dark-purple)]' },
                    supplier_both: { label: 'Supplier Send & Receive', classes: 'bg-[var(--data-leaf)] bg-opacity-20 text-[var(--dark-purple)]' },
                    none: { label: 'Supplier Not Involved', classes: 'bg-gray-200 text-gray-800' }
                };

                const context = item.context || "No additional context is available for this interface.";
                
                detailsContent.innerHTML = `
                    <div class="flex justify-between items-start">
                        <h2 class="text-3xl font-bold text-[var(--dark-purple)] mb-2" tabindex="-1">${escapeHtml(item.name)}</h2>
                        <span class="text-sm font-semibold px-3 py-1 rounded-full ${typeInfo[item.supplier_type].classes}">${typeInfo[item.supplier_type].label}</span>
                    </div>
                    <p class="text-lg text-[var(--purple)] opacity-90 font-medium mb-6">${escapeHtml(item.id)}</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div class="bg-[var(--birch)] p-4 rounded-lg">
                            <h4 class="font-semibold text-[var(--eon-red)] text-sm mb-1 uppercase tracking-wider">FROM</h4>
                            <p class="font-medium text-[var(--dark-purple)]">${escapeHtml(item.sender) || 'N/A'}</p>
                        </div>
                        <div class="bg-[var(--birch)] p-4 rounded-lg">
                            <h4 class="font-semibold text-[var(--eon-red)] text-sm mb-1 uppercase tracking-wider">TO</h4>
                            <p class="font-medium text-[var(--dark-purple)]">${escapeHtml(item.receiver) || 'N/A'}</p>
                        </div>
                    </div>

                    <h3 class="text-xl font-bold text-[var(--eon-red)] mb-4">Context & Purpose</h3>
                    <div class="bg-[var(--birch)] border border-gray-200 rounded-lg p-4">
                        <p class="text-[var(--dark-purple)] leading-relaxed">${escapeHtml(context)}</p>
                    </div>
                `;
                detailsContent.querySelector('h2').focus();
            };
            
            const escapeHtml = (text) => {
                if (!text) return '';
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            };
            
            let debounceTimer;
            searchInput.addEventListener('input', (e) => {
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(() => {
                    currentSearchTerm = e.target.value;
                    renderInterfaceList();
                }, 300);
            });

            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    currentFilter = button.dataset.filter;
                    filterButtons.forEach(btn => {
                        btn.classList.remove('active-filter');
                        btn.setAttribute('aria-pressed', 'false');
                    });
                    button.classList.add('active-filter');
                    button.setAttribute('aria-pressed', 'true');
                    renderInterfaceList();
                });
            });

            interfaceList.addEventListener('click', (e) => {
                const itemElement = e.target.closest('[data-id]');
                if (itemElement) {
                    showDetails(itemElement.dataset.id);
                }
            });

            interfaceList.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    const itemElement = e.target.closest('[data-id]');
                    if (itemElement) {
                        e.preventDefault();
                        showDetails(itemElement.dataset.id);
                    }
                }
            });

            // Initialize
            document.querySelector('.filter-btn[data-filter="all"]').classList.add('active-filter');
            renderInterfaceList();
        });
    </script>
</body>
</html>
